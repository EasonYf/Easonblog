import{createRequire as f}from"node:module";import{tex as d}from"@mdit/plugin-tex";import v from"upath";const a=f(import.meta.url),c=t=>{try{const{AllPackages:e}=a("mathjax-full/js/input/tex/AllPackages.js"),{TeX:s}=a("mathjax-full/js/input/tex.js"),{CHTML:l}=a("mathjax-full/js/output/chtml.js"),{SVG:n}=a("mathjax-full/js/output/svg.js");return{InputJax:new s({packages:e,...t.tex}),OutputJax:t.output==="chtml"?new l({fontURL:v.dirname(a.resolve("mathjax-full/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff")),adaptiveCSS:!0,...t.chtml}):new n({fontCache:"none",...t.svg}),enableAssistiveMml:t.a11y!==!1}}catch{return console.error('[@mdit/mathjax] "mathjax-full" is not installed!'),null}},M=(t={})=>{const e=c(t);if(!e)return null;const{OutputJax:s,InputJax:l}=e,{CHTML:n}=a("mathjax-full/js/output/chtml.js"),o=a("mathjax-full/js/adaptors/liteAdaptor.js").liteAdaptor(),r=a("mathjax-full/js/handlers/html.js").RegisterHTMLHandler,u=a("mathjax-full/js/a11y/assistive-mml.js").AssistiveMmlHandler,{mathjax:m}=a("mathjax-full/js/mathjax.js"),h=r(o);t.a11y!==!1&&u(h);const j=()=>{s instanceof n&&s.clearCache()},i=()=>{l.reset()},p=()=>{const x=o.innerHTML(s.styleSheet(m.document("",e)));return j(),x};return{adaptor:o,documentOptions:e,mathFence:t.mathFence??!1,clearStyle:j,reset:i,outputStyle:p}},y=(t,e)=>{const{mathjax:s}=a("mathjax-full/js/mathjax.js"),{adaptor:l,documentOptions:n,mathFence:o=!1}=e;t.use(d,{mathFence:o,render:(r,u)=>{const m=s.document(r,n).convert(r,{display:u});return l.outerHTML(m)}})};export{M as createMathjaxInstance,c as getDocumentOptions,y as mathjax};
//# sourceMappingURL=index.mjs.map
